(window["webpackJsonphydro-health-on-demand"]=window["webpackJsonphydro-health-on-demand"]||[]).push([[0],{28:function(e,t,a){e.exports=a(50)},33:function(e,t,a){},34:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(14),i=a.n(n),o=(a(33),a(34),a(15)),l=a(6),c=a(8),m=a(9),u=a(11),d=a(10),h=a(12),p=a(16),v=Object(p.c)({accessToken:"pk.eyJ1IjoibG9vaWtpYW5zZW5nIiwiYSI6ImNqdWF3MzFrMzA2bmYzeXBkMGdkMTdsM2sifQ.SMkjjzrxv1Gwmf127YmGpA"}),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"HOME"),s.a.createElement(v,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"100vh",width:"100vw"}},s.a.createElement(p.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15"}},s.a.createElement(p.a,{coordinates:[-.481747846041145,51.3233379650232]}))),";")}}]),t}(r.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props.num)}},{key:"render",value:function(){return s.a.createElement("div",{className:"param_"+(this.props.num<4?"upper":"lower")+"_column"},s.a.createElement("div",{className:"horseshoe_upper_wrapper"},s.a.createElement("div",{className:"horseshoe"},s.a.createElement("div",{className:"radial-wrapper"},s.a.createElement("h1",{className:"param_value unit_value1",id:"text1"},this.props.value),s.a.createElement("h1",{className:"param_unit unit_value1"},this.props.unit),s.a.createElement("div",{className:"radial-section radial-right-section"},s.a.createElement("div",{className:"wedge1"})),s.a.createElement("div",{className:"radial-section radial-left-section"},s.a.createElement("div",{className:"wedge1"})),s.a.createElement("div",{className:"marker1 start"}),s.a.createElement("div",{className:"marker1 end"})),s.a.createElement("div",{className:"radial-wrapper radial-progress-wrapper"},s.a.createElement("div",{className:"radial-section radial-right-section"},s.a.createElement("div",{className:"wedge1",id:"right1",style:{WebkitTransform:"rotateZ("+this.props.right_degree+"deg)",transform:"rotateZ("+this.props.right_degree+"deg)"}})),s.a.createElement("div",{className:"radial-section radial-left-section"},s.a.createElement("div",{className:"wedge1",id:"left1",style:{WebkitTransform:"rotateZ("+this.props.left_degree+"deg)",transform:"rotateZ("+this.props.left_degree+"deg)"}})),s.a.createElement("div",{className:"marker1 start"}),s.a.createElement("div",{className:"marker1 end",id:"marker1",style:{WebkitTransform:"rotateZ("+this.props.marker_degree+"deg)",transform:"rotateZ("+this.props.marker_degree+"deg)"}}))),s.a.createElement("h1",{className:"param_title"},this.props.param)))}}]),t}(r.Component),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={param:["Conductivity","Dissolved Oxygen","Total Dissolved Solids","Turbidity","pH","Temperature"],unit:["\u03bcS","mg/L","mg/L","NTU","","\u2103"],isLoading:!0,response:[],values:{conductivity:{marker:0,left:0,right:0,oldValue:50},oxygen:{marker:0,left:0,right:0,oldValue:50},tds:{marker:0,left:0,right:0,oldValue:50},turbidity:{marker:0,left:0,right:0,oldValue:50},ph:{marker:0,left:0,right:0,oldValue:50},temperature:{marker:0,left:0,right:0,oldValue:50}}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.get_xpand()}},{key:"render",value:function(){return this.state.isLoading?s.a.createElement("div",null,"Loading Data"):s.a.createElement("div",null,s.a.createElement("div",{className:"monitor_status_bar"},s.a.createElement("h2",{className:"page-header"},"Monitor Parameter Value"),s.a.createElement("div",{className:"upper_status_bar"},s.a.createElement(f,{num:"1",param:this.state.param[0],unit:this.state.unit[0],value:this.state.response[0].conductivity,marker_degree:this.state.values.conductivity.marker,left_degree:this.state.values.conductivity.left,right_degree:this.state.values.conductivity.right}),s.a.createElement(f,{num:"2",param:this.state.param[1],unit:this.state.unit[1],value:this.state.response[0].oxygen,marker_degree:this.state.values.oxygen.marker,left_degree:this.state.values.oxygen.left,right_degree:this.state.values.oxygen.right}),s.a.createElement(f,{num:"3",param:this.state.param[2],unit:this.state.unit[2],value:this.state.response[0].tds,marker_degree:this.state.values.tds.marker,left_degree:this.state.values.tds.left,right_degree:this.state.values.tds.right})),s.a.createElement("div",{className:"lower_status_bar"},s.a.createElement(f,{num:"4",param:this.state.param[3],unit:this.state.unit[3],value:this.state.response[0].turbidity,marker_degree:this.state.values.turbidity.marker,left_degree:this.state.values.turbidity.left,right_degree:this.state.values.turbidity.right}),s.a.createElement(f,{num:"5",param:this.state.param[4],unit:this.state.unit[4],value:this.state.response[0].ph,marker_degree:this.state.values.ph.marker,left_degree:this.state.values.ph.left,right_degree:this.state.values.ph.right}),s.a.createElement(f,{num:"6",param:this.state.param[5],unit:this.state.unit[5],value:this.state.response[0].temperature,marker_degree:this.state.values.temperature.marker,left_degree:this.state.values.temperature.left,right_degree:this.state.values.temperature.right}))))}},{key:"changeProgressDial",value:function(e,t){if(t<=66){e.right=-181,e.oldValue>66&&(e.right=-181,e.marker=0);var a=-Math.abs(180-Math.round(2.7*t));e.left=a+1,e.marker=a}else{e.oldValue<=66&&(e.left=0,e.marker=0);var r=-90-2.7*(100-t);e.right=r,e.marker=180+r}return e.oldValue=t,e}},{key:"get_xpand",value:function(e,t){var a=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/applicationmgt/authenticate",{headers:{"X-Secret":"UmNvalVjX09Td2JtY0NHTE9ST3AyNFdpbUdrYTpyTXRQaVNOVzNsTEhHaEREWDZSbFRmYjM0bVVh","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(r){a.xpandGetJWT(r.access_token,e,t)}))}},{key:"xpandGetJWT",value:function(e,t,a,r){var s=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/usermgt/v1/authenticate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({username:"utmgroup02@noreply.com",password:"teamh2o"})}).then((function(e){return e.json()})).then((function(a){s.xpandGetData(a["X-IoT-JWT"],e,t,r)}))}},{key:"xpandGetData",value:function(e,t,a,r){var s=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/datamgt/v1/user/devicehistory?eventName=Try&deviceIds=16492&noOfEvents=7&zoneId=Asia%2FKuala_Lumpur",{headers:{Authorization:"Bearer "+t,"X-IoT-JWT":e}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e[16492][0]);var t=s.state.values;console.log("temp",t),t.conductivity=s.changeProgressDial(s.state.values.conductivity,e[16492][0].conductivity/6e3*100),t.oxygen=s.changeProgressDial(s.state.values.oxygen,e[16492][0].oxygen/8.8*100),t.tds=s.changeProgressDial(s.state.values.tds,e[16492][0].tds/3500*100),t.turbidity=s.changeProgressDial(s.state.values.turbidity,e[16492][0].turbidity/50*100),t.ph=s.changeProgressDial(s.state.values.ph,(e[16492][0].ph-5)/9*100),t.temperature=s.changeProgressDial(s.state.values.temperature,(e[16492][0].temperature-16)/24*100),s.setState({values:t,response:e[16492],isLoading:!1})}))}}]),t}(r.Component);var k=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(o.a,null,s.a.createElement("div",{className:"navbar",style:{backgroundColor:"blue",justifyContent:"flexStart !important"}},s.a.createElement(o.b,{className:"btn btn-success",to:"/"},"Home"),s.a.createElement(o.b,{className:"btn btn-success",to:"monitor"},"Monitor")),s.a.createElement(l.a,{exact:!0,path:"/",component:g}),s.a.createElement(l.a,{path:"/monitor",component:y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(48),a(49);i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.5a0011e7.chunk.js.map