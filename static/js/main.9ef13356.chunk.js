(window["webpackJsonphydro-health-on-demand"]=window["webpackJsonphydro-health-on-demand"]||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/favicon.942e51a6.png"},30:function(e,t,a){e.exports=a(52)},35:function(e,t,a){},36:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(17),o=a.n(s),i=(a(35),a(36),a(15)),l=a(12),c=a(7),m=a(8),u=a(10),p=a(9),d=a(11),h=a(13),g=Object(h.c)({accessToken:"pk.eyJ1IjoibG9vaWtpYW5zZW5nIiwiYSI6ImNqdWF3MzFrMzA2bmYzeXBkMGdkMTdsM2sifQ.SMkjjzrxv1Gwmf127YmGpA"}),v=(r.Component,function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props.num)}},{key:"render",value:function(){return n.a.createElement("div",{className:"param_"+(this.props.num<4?"upper":"lower")+"_column"},n.a.createElement("div",{className:"horseshoe_upper_wrapper"},n.a.createElement("div",{className:"horseshoe"},n.a.createElement("div",{className:"radial-wrapper"},n.a.createElement("h1",{className:"param_value unit_value"+this.props.num,id:"text1"},this.props.value),n.a.createElement("h1",{className:"param_unit unit_value"+this.props.num},this.props.unit),n.a.createElement("div",{className:"radial-section radial-right-section"},n.a.createElement("div",{className:"wedge"+this.props.num})),n.a.createElement("div",{className:"radial-section radial-left-section"},n.a.createElement("div",{className:"wedge"+this.props.num})),n.a.createElement("div",{className:"marker"+this.props.num+" start"}),n.a.createElement("div",{className:"marker"+this.props.num+" end"})),n.a.createElement("div",{className:"radial-wrapper radial-progress-wrapper"},n.a.createElement("div",{className:"radial-section radial-right-section"},n.a.createElement("div",{className:"wedge"+this.props.num,id:"right1",style:{WebkitTransform:"rotateZ("+this.props.right_degree+"deg)",transform:"rotateZ("+this.props.right_degree+"deg)"}})),n.a.createElement("div",{className:"radial-section radial-left-section"},n.a.createElement("div",{className:"wedge"+this.props.num,id:"left1",style:{WebkitTransform:"rotateZ("+this.props.left_degree+"deg)",transform:"rotateZ("+this.props.left_degree+"deg)"}})),n.a.createElement("div",{className:"marker"+this.props.num+" start"}),n.a.createElement("div",{className:"marker"+this.props.num+" end",id:"marker1",style:{WebkitTransform:"rotateZ("+this.props.marker_degree+"deg)",transform:"rotateZ("+this.props.marker_degree+"deg)"}}))),n.a.createElement("h1",{className:"param_title"},this.props.param)))}}]),t}(r.Component)),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={param:["Conductivity","Dissolved Oxygen","Total Dissolved Solids","Turbidity","pH","Temperature"],unit:["\u03bcS","mg/L","mg/L","NTU","","\u2103"],isLoading:!0,response:[],values:{conductivity:{marker:0,left:0,right:0,oldValue:50},oxygen:{marker:0,left:0,right:0,oldValue:50},tds:{marker:0,left:0,right:0,oldValue:50},turbidity:{marker:0,left:0,right:0,oldValue:50},ph:{marker:0,left:0,right:0,oldValue:50},temperature:{marker:0,left:0,right:0,oldValue:50}}},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.get_xpand()}},{key:"render",value:function(){return this.state.isLoading?n.a.createElement("div",null,"Loading Data"):n.a.createElement("div",null,n.a.createElement("div",{className:"monitor_status_bar"},n.a.createElement("h2",{className:"page-header"},"Monitor Parameter Value"),n.a.createElement("div",{className:"upper_status_bar"},n.a.createElement(v,{num:"1",param:this.state.param[0],unit:this.state.unit[0],value:this.state.response[0].conductivity,marker_degree:this.state.values.conductivity.marker,left_degree:this.state.values.conductivity.left,right_degree:this.state.values.conductivity.right}),n.a.createElement(v,{num:"2",param:this.state.param[1],unit:this.state.unit[1],value:this.state.response[0].oxygen,marker_degree:this.state.values.oxygen.marker,left_degree:this.state.values.oxygen.left,right_degree:this.state.values.oxygen.right}),n.a.createElement(v,{num:"3",param:this.state.param[2],unit:this.state.unit[2],value:this.state.response[0].tds,marker_degree:this.state.values.tds.marker,left_degree:this.state.values.tds.left,right_degree:this.state.values.tds.right})),n.a.createElement("div",{className:"lower_status_bar"},n.a.createElement(v,{num:"4",param:this.state.param[3],unit:this.state.unit[3],value:this.state.response[0].turbidity,marker_degree:this.state.values.turbidity.marker,left_degree:this.state.values.turbidity.left,right_degree:this.state.values.turbidity.right}),n.a.createElement(v,{num:"5",param:this.state.param[4],unit:this.state.unit[4],value:this.state.response[0].ph,marker_degree:this.state.values.ph.marker,left_degree:this.state.values.ph.left,right_degree:this.state.values.ph.right}),n.a.createElement(v,{num:"6",param:this.state.param[5],unit:this.state.unit[5],value:this.state.response[0].temperature,marker_degree:this.state.values.temperature.marker,left_degree:this.state.values.temperature.left,right_degree:this.state.values.temperature.right}))))}},{key:"changeProgressDial",value:function(e,t){if(t<=66){e.right=-181,e.oldValue>66&&(e.right=-181,e.marker=0);var a=-Math.abs(180-Math.round(2.7*t));e.left=a+1,e.marker=a}else{e.oldValue<=66&&(e.left=0,e.marker=0);var r=-90-2.7*(100-t);e.right=r,e.marker=180+r}return e.oldValue=t,e}},{key:"get_xpand",value:function(e,t){var a=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/applicationmgt/authenticate",{headers:{"X-Secret":"UmNvalVjX09Td2JtY0NHTE9ST3AyNFdpbUdrYTpyTXRQaVNOVzNsTEhHaEREWDZSbFRmYjM0bVVh","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(r){a.xpandGetJWT(r.access_token,e,t)}))}},{key:"xpandGetJWT",value:function(e,t,a,r){var n=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/usermgt/v1/authenticate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({username:"utmgroup02@noreply.com",password:"teamh2o"})}).then((function(e){return e.json()})).then((function(a){n.xpandGetData(a["X-IoT-JWT"],e,t,r)}))}},{key:"xpandGetData",value:function(e,t,a,r){var n=this;fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/datamgt/v1/user/devicehistory?eventName=Try&deviceIds=16492&noOfEvents=7&zoneId=Asia%2FKuala_Lumpur",{headers:{Authorization:"Bearer "+t,"X-IoT-JWT":e}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e[16492][0]);var t=n.state.values;console.log("temp",t),t.conductivity=n.changeProgressDial(n.state.values.conductivity,e[16492][0].conductivity/6e3*100),t.oxygen=n.changeProgressDial(n.state.values.oxygen,e[16492][0].oxygen/8.8*100),t.tds=n.changeProgressDial(n.state.values.tds,e[16492][0].tds/3500*100),t.turbidity=n.changeProgressDial(n.state.values.turbidity,e[16492][0].turbidity/50*100),t.ph=n.changeProgressDial(n.state.values.ph,(e[16492][0].ph-5)/9*100),t.temperature=n.changeProgressDial(n.state.values.temperature,(e[16492][0].temperature-16)/24*100),n.setState({values:t,response:e[16492],isLoading:!1})}))}}]),t}(r.Component),y=a(6),b=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){for(var e="",t=0;t<4;t++)e+=this.props.borderColor.split(",")[0]+","+this.props.borderColor.split(",")[1]+","+25*(t+1)+"%) ";return console.log(e),n.a.createElement("div",{style:{borderColor:e,borderWidth:"15px",borderStyle:"solid",color:this.props.textColor,margin:"1vh 2.5vw"}},n.a.createElement("h4",null,this.props.text),n.a.createElement("h4",null,this.props.count))}}]),t}(r.Component),E=Object(h.c)({accessToken:"pk.eyJ1IjoibG9vaWtpYW5zZW5nIiwiYSI6ImNqdWF3MzFrMzA2bmYzeXBkMGdkMTdsM2sifQ.SMkjjzrxv1Gwmf127YmGpA"}),k=[103.6715,1.5177],x=[7],j=function(){var e=Object(l.e)(),t=Object(r.useState)({location:[{lat:1.5177,lon:103.6715,name:"JB Sutera Mall",type:"scattermapbox",mode:"markers",state:"Safe",response:[]},{lat:3.172788,lon:101.719556,name:"5G Ericsson KL",type:"scattermapbox",mode:"markers",state:"",response:[]},{lat:1.555145,lon:103.63764,name:"UTM JB Lake",type:"scattermapbox",mode:"markers",state:"Safe"},{lat:1.460468,lon:103.940487,name:"Sungai Kim Kim",type:"scattermapbox",mode:"markers",state:"Safe"},{lat:3.828111,lon:103.265507,name:"Sungai Tiram",type:"scattermapbox",mode:"markers",state:"Safe"},{lat:2.892086,lon:101.68903,name:"Sungai Langat",type:"scattermapbox",mode:"markers",state:"Safe"},{lat:3.496129,lon:102.912493,name:"Sungai Pahang",type:"scattermapbox",mode:"markers",state:"Extremely Polluted"},{lat:2.235268,lon:102.256568,name:"Sungai Malacca",type:"scattermapbox",mode:"markers",state:"Polluted"},{lat:4.370342,lon:101.072384,name:"Sungai Kinta",type:"scattermapbox",mode:"markers",state:"Polluted"}]}),a=Object(y.a)(t,2),s=a[0],o=a[1],i=Object(r.useState)(!1),c=Object(y.a)(i,2),m=c[0],u=c[1],p=Object(r.useState)(""),d=Object(y.a)(p,2),g=(d[0],d[1],Object(r.useState)([])),v=Object(y.a)(g,2),f=(v[0],v[1]),j=Object(r.useState)(!0),S=Object(y.a)(j,2),w=S[0],_=S[1],N=Object(r.useState)(0),O=Object(y.a)(N,2),T=O[0],M=O[1],C=Object(r.useState)(0),W=Object(y.a)(C,2),L=W[0],z=W[1],A=Object(r.useState)(0),I=Object(y.a)(A,2),P=I[0],V=I[1];function D(e,t){fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/applicationmgt/authenticate",{headers:{"X-Secret":"UmNvalVjX09Td2JtY0NHTE9ST3AyNFdpbUdrYTpyTXRQaVNOVzNsTEhHaEREWDZSbFRmYjM0bVVh","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t;t=e.access_token,fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/usermgt/v1/authenticate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({username:"utmgroup02@noreply.com",password:"teamh2o"})}).then((function(e){return e.json()})).then((function(e){!function(e,t,a,r){fetch("https://cors-anywhere.herokuapp.com/https://iot.xpand.asia/developer/api/datamgt/v1/user/devicehistory?eventName=Try&deviceIds=16492&noOfEvents=7&zoneId=Asia%2FKuala_Lumpur",{headers:{Authorization:"Bearer "+t,"X-IoT-JWT":e}}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log("result: ",e[16492][0]),f(e[16492]),_(!1);var t=s;t.location.forEach((function(t){"5G Ericsson KL"===t.name&&(t.state=e[16492][0].wqi>=40?"Safe":e[16492][0].wqi>=30?"Polluted":"Extremely Polluted")})),o(t);var a=0,r=0,n=0;s.location.forEach((function(e){console.log(e.name,e.state),"Safe"===e.state?a++:"Polluted"===e.state?r++:n++})),M(a),z(r),V(n)}))}(e["X-IoT-JWT"],t)}))}))}Object(r.useEffect)((function(){console.log(typeof s),D()}),[]);var J={width:"33.33%"},Y={fontFamily:"Comic Sans MS",fontSize:"1em",textAlign:"left",paddingLeft:"1.5em"};return w?n.a.createElement("div",null,"Loading Data..."):n.a.createElement("div",null,n.a.createElement("h3",{style:Y},"Number of river spot according to the pollution level"),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:J},n.a.createElement(b,{textColor:"green",borderColor:"hsl(120,100%,50%)",text:"SAFE",count:T})),n.a.createElement("div",{style:J},n.a.createElement(b,{textColor:"blue",borderColor:"hsl(240,100%,50%)",text:"POLLUTED",count:L})),n.a.createElement("div",{style:J},n.a.createElement(b,{textColor:"red",borderColor:"hsl(0,100%,50%)",text:"EXTREMELY POLLUTED",count:P}))),n.a.createElement("h3",{style:Y},"Location of devices in Malaysia"),n.a.createElement("div",{style:{border:"5px orange solid",display:"-webkit-inline-box"}},n.a.createElement(E,{zoom:x,style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"65vh",width:"95vw",display:"table-cell"},center:k,onClick:function(e,t){return console.log("onClickMap!",t.lngLat)}},m?n.a.createElement(h.b,{coordinates:[m.lon,m.lat],offset:{"bottom-left":[12,0],bottom:[0,-10],"bottom-right":[-12,-38]}},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.description}})):n.a.createElement("div",null),function(){var t=[],a="";return s.location.forEach((function(r){console.log(r.state),a="Safe"===r.state?"green":"Polluted"===r.state?"blue":"red",console.log(a),t.push(n.a.createElement(h.a,{properties:{description:"<strong>"+r.name+"</strong>"},coordinates:[r.lon,r.lat],anchor:"bottom",onClick:function(t){console.log("mouse click",t),e.push("/monitor")},onMouseEnter:function(e){console.log("mouse enter",e),u({lat:r.lat,lon:r.lon,description:"<strong>"+r.name+"</strong>"})},onMouseLeave:function(e){console.log("mouse leave",e),u(!1)}},n.a.createElement("div",{style:{zIndex:1e3,width:"1em",height:"1em",backgroundColor:a,borderRadius:"50%"}})))})),console.log(t),t}())))},S=a(29),w=a.n(S);var _=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(i.a,null,n.a.createElement("div",{className:"",style:{backgroundColor:"blue",justifyContent:"flexStart !important",position:"relative",display:"flex",flexWrap:"wrap",alignItems:"center",padding:".5rem 1rem"}},n.a.createElement("div",{style:{width:"60%",color:"white",textAlign:"left",paddingLeft:"5em"}},n.a.createElement("img",{src:w.a,style:{width:"2em"},alt:"Water logo"}),n.a.createElement("span",null,"Hydro Health On-demand")),n.a.createElement("div",{style:{width:"40%"}},n.a.createElement(i.b,{className:"btn btn-success mx-2",to:"/"},"Home"),n.a.createElement(i.b,{className:"btn btn-success mx-2",to:"monitor"},"Monitor"))),n.a.createElement(l.a,{exact:!0,path:"/",component:j}),n.a.createElement(l.a,{path:"/monitor",component:f})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(50),a(51);o.a.render(n.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.9ef13356.chunk.js.map